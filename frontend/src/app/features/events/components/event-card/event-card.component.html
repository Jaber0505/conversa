<shared-card class="event-card" [class.recommended]="isRecommended" [class.nearby]="isNearby" [clickable]="true" (click)="onCardClick()">
  <div header class="event-header">
    <!-- Badges en haut de la carte -->
    <div class="header-badges">
      <!-- Badge de langue - toujours affichÃ© -->
      <shared-badge variant="secondary" tone="solid" class="language-badge">
        ğŸ—£ï¸ {{ event.language_code }}
      </shared-badge>

      <!-- Badge recommandÃ© -->
      <shared-badge *ngIf="isRecommended && !event.is_cancelled" variant="accent" tone="solid" class="recommended-badge">
        â­ {{ 'events.recommended' | t }}
      </shared-badge>

      <!-- Badge Ã  proximitÃ© -->
      <shared-badge *ngIf="isNearby && !isRecommended && !event.is_cancelled" variant="success" tone="solid" class="nearby-badge">
        ğŸ“ {{ 'events.nearby' | t }}
      </shared-badge>

      <!-- Autres badges -->
      <shared-badge *ngIf="event.is_cancelled" variant="danger" tone="soft">
        {{ 'events.cancelled' | t }}
      </shared-badge>
      <shared-badge *ngIf="isOrganizer && isDraft && !event.is_cancelled" variant="secondary" tone="soft">
        {{ 'events.draft' | t }}
      </shared-badge>
      <shared-badge *ngIf="isOrganizer && !event.is_cancelled" variant="primary" tone="soft">
        {{ 'events.organizer' | t }}
      </shared-badge>
      <shared-badge *ngIf="!isOrganizer && reserved && !event.is_cancelled" variant="accent" tone="soft">
        {{ 'events.reserved' | t }}
      </shared-badge>
    </div>

    <h3 class="event-title">{{ event.title }}</h3>
    <p class="event-theme" *ngIf="event.theme">{{ event.theme }}</p>
  </div>

  <div class="event-body">
    <div class="info-row">
      <div class="info-content">
        <span class="info-label">{{ 'events.when' | t }}</span>
        <span class="info-value">{{ formattedDate }}</span>
      </div>
    </div>

    <div class="info-row">
      <div class="info-content">
        <span class="info-label">{{ 'events.address' | t }}</span>
        <span class="info-value">{{ event.address }}</span>
      </div>
    </div>

    <div class="info-row" *ngIf="event.partner_city">
      <div class="info-content">
        <span class="info-label">{{ 'events.city' | t }}</span>
        <span class="info-value">{{ event.partner_city }}</span>
      </div>
    </div>
  </div>

  <div footer class="event-footer">
    <div class="button-group" *ngIf="!event.is_cancelled">
      <!-- Bouton DÃ©tails - toujours affichÃ© -->
      <shared-button type="button" variant="outline" size="sm" (click)="onViewDetails($event)" class="action-button">
        {{ 'common.details' | t }}
      </shared-button>

      <!-- Pour l'organisateur avec Ã©vÃ©nement brouillon : bouton "Payer pour publier" -->
      <shared-button
        *ngIf="isOrganizer && isDraft"
        type="button"
        variant="accent"
        size="sm"
        [disabled]="isPaymentLoading"
        (click)="onPayDraft($event)"
        class="action-button payment-button"
        [class.loading]="isPaymentLoading">
        <span *ngIf="!isPaymentLoading">{{ 'events.pay_to_publish' | t }}</span>
        <span *ngIf="isPaymentLoading" class="loading-text">{{ 'common.loading' | t }}</span>
      </shared-button>

      <!-- Pour l'organisateur avec Ã©vÃ©nement publiÃ© : badge "RÃ©servÃ©" Ã  la place du bouton -->
      <shared-badge *ngIf="isOrganizer && isPublished" variant="success" tone="soft" class="reserved-badge">
        {{ 'events.reserved' | t }}
      </shared-badge>
    </div>
  </div>
</shared-card>

