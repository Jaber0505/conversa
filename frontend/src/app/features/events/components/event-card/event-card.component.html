<shared-card
  class="event-card"
  [class.recommended]="isRecommended"
  [class.nearby]="isNearby"
  [clickable]="true"
  (click)="onCardClick()">
  <div class="event-main">
    <div class="top-line">
      <shared-badge variant="secondary" tone="solid" class="language-chip">
        {{ languageBadgeKey | t }}
      </shared-badge>
      <shared-badge variant="primary" tone="soft" class="difficulty-chip">
        {{ 'events.difficulty.' + event.difficulty | t }}
      </shared-badge>

      <div class="status-badges">
        <shared-badge *ngIf="event.is_cancelled" variant="danger" tone="soft">
          {{ 'events.cancelled' | t }}
        </shared-badge>
        <shared-badge *ngIf="isOrganizer && isDraft && !event.is_cancelled" variant="secondary" tone="soft">
          {{ 'events.draft' | t }}
        </shared-badge>
        <shared-badge *ngIf="isOrganizer && !event.is_cancelled" variant="primary" tone="soft">
          {{ 'events.organizer' | t }}
        </shared-badge>
        <shared-badge *ngIf="!isOrganizer && reserved && !event.is_cancelled" variant="accent" tone="soft">
          {{ 'events.reserved' | t }}
        </shared-badge>
        <shared-badge *ngIf="!event.is_cancelled && isFull" variant="danger" tone="soft">
          {{ 'events.detail.event_full' | t }}
        </shared-badge>
      </div>
    </div>

    <h3 class="partner-name">{{ event.partner_name || event.title }}</h3>
    <p class="event-theme" *ngIf="event.theme">{{ event.theme }}</p>

    <div class="info-block">
      <span class="info-title">{{ 'events.detail.location' | t }}</span>
      <p class="info-text">{{ partnerAddress }}</p>
    </div>

    <div class="info-block">
      <span class="info-title">{{ 'events.when' | t }}</span>
      <p class="info-text">{{ formattedDate }}</p>
    </div>

    <shared-badge *ngIf="interestBadgeKey && !event.is_cancelled" class="interest-badge" variant="accent" tone="soft">
      {{ interestBadgeKey | t }}
    </shared-badge>
  </div>

  <div footer class="event-footer" (click)="$event.stopPropagation()">
    <app-event-action-button
      [event]="event"
      [userId]="userId"
      [isOrganizer]="isOrganizer"
      [size]="'sm'"
      [primaryOnly]="false"
      [showBadge]="false"
      [loading]="isPaymentLoading"
      (viewDetails)="onViewDetails()"
      (actionTriggered)="handleEventAction($event)">
    </app-event-action-button>
  </div>
</shared-card>
