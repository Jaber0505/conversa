<shared-card
  class="event-card"
  [class.recommended]="isRecommended"
  [class.nearby]="isNearby"
  [clickable]="true"
  (click)="onCardClick()">
  <div class="event-main">
    <div class="top-line">
      <shared-badge variant="secondary" tone="solid" class="language-chip">
        {{ languageBadgeKey | t }}
      </shared-badge>

      <div class="status-badges">
        <shared-badge *ngIf="event.is_cancelled" variant="danger" tone="soft">
          {{ 'events.cancelled' | t }}
        </shared-badge>
        <shared-badge *ngIf="isOrganizer && isDraft && !event.is_cancelled" variant="secondary" tone="soft">
          {{ 'events.draft' | t }}
        </shared-badge>
        <shared-badge *ngIf="isOrganizer && !event.is_cancelled" variant="primary" tone="soft">
          {{ 'events.organizer' | t }}
        </shared-badge>
        <shared-badge *ngIf="!isOrganizer && reserved && !event.is_cancelled" variant="accent" tone="soft">
          {{ 'events.reserved' | t }}
        </shared-badge>
        <shared-badge *ngIf="!event.is_cancelled && isFull" variant="danger" tone="soft">
          {{ 'events.detail.event_full' | t }}
        </shared-badge>
      </div>
    </div>

    <h3 class="partner-name">{{ event.partner_name || event.title }}</h3>
    <p class="event-theme" *ngIf="event.theme">{{ event.theme }}</p>

    <div class="info-block">
      <span class="info-title">{{ 'events.detail.location' | t }}</span>
      <p class="info-text">{{ partnerAddress }}</p>
    </div>

    <div class="info-block">
      <span class="info-title">{{ 'events.when' | t }}</span>
      <p class="info-text">{{ formattedDate }}</p>
    </div>

    <shared-badge *ngIf="interestBadgeKey && !event.is_cancelled" class="interest-badge" variant="accent" tone="soft">
      {{ interestBadgeKey | t }}
    </shared-badge>
  </div>

  <div footer class="event-footer">
    <div class="button-group" *ngIf="!event.is_cancelled">
      <shared-button type="button" variant="outline" size="sm" (click)="onViewDetails($event)" class="action-button">
        {{ 'common.details' | t }}
      </shared-button>

      <shared-button
        *ngIf="canPlayGame"
        type="button"
        variant="accent"
        size="sm"
        (click)="onPlayGame($event)"
        class="action-button play-button">
        ğŸ² Jouer
      </shared-button>

      <shared-button
        *ngIf="isOrganizer && isDraft"
        type="button"
        variant="accent"
        size="sm"
        [disabled]="isPaymentLoading"
        (click)="onPayDraft($event)"
        class="action-button payment-button"
        [class.loading]="isPaymentLoading">
        <span *ngIf="!isPaymentLoading">{{ 'events.pay_to_publish' | t }}</span>
        <span *ngIf="isPaymentLoading" class="loading-text">{{ 'common.loading' | t }}</span>
      </shared-button>

      <shared-badge *ngIf="isOrganizer && isPublished && !canPlayGame" variant="success" tone="soft" class="reserved-badge">
        {{ 'events.reserved' | t }}
      </shared-badge>
    </div>
  </div>
</shared-card>
