<div class="lang-overlay" (click)="onCancel()">
  <div class="lang-popover" (click)="$event.stopPropagation()">
    <header class="lp-header">
      <h3>{{ titleKey() | t }}</h3>
    </header>

    <section class="lp-section">
      <h4 class="lp-section__title">{{ 'i18n.ui' | t }}</h4>
      <ul class="lp-list" role="listbox" [attr.aria-activedescendant]="'ui-' + selected()">
        <li *ngFor="let l of langs"
            class="lp-item"
            [class.active]="l === selected()"
            role="option"
            [attr.id]="'ui-' + l"
            (click)="onToggle(l)">
          <span class="flag" aria-hidden="true">{{ flagOf(l) }}</span>
          <span class="code">{{ l.toUpperCase() }}</span>
          <span class="label">{{ labelKeyOf(l) | t }}</span>
          <span class="check" *ngIf="l === selected()">âœ“</span>
        </li>
      </ul>
    </section>

    <section *ngIf="allowMulti" class="lp-section">
      <h4 class="lp-section__title">{{ 'i18n.preferred' | t }}</h4>
      <ul class="lp-list" role="group">
        <li *ngFor="let l of langs"
            class="lp-item"
            [class.active]="isPref(l)"
            (click)="onTogglePref(l)">
          <span class="flag" aria-hidden="true">{{ flagOf(l) }}</span>
          <input class="checkbox" type="checkbox" [checked]="isPref(l)" aria-hidden="true" />
          <span class="code">{{ l.toUpperCase() }}</span>
          <span class="label">{{ labelKeyOf(l) | t }}</span>
        </li>
      </ul>
    </section>

    <footer class="lp-actions">
      <button type="button" class="btn ghost" (click)="onCancel()">{{ 'common.cancel' | t }}</button>
      <button type="button" class="btn primary" (click)="onConfirm()">{{ 'common.save' | t }}</button>
    </footer>
  </div>
</div>
