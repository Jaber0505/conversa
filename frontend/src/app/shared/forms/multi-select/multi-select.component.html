<div class="ms-control"
     [class.ms--disabled]="disabled"
     [class.ms--error]="error"
     (click)="toggleOpen($event)"
     role="button"
     tabindex="0">
  <div class="ms-control__chips" *ngIf="selected?.length; else placeholderTpl">
    <shared-badge
      *ngFor="let s of selected"
      variant="secondary"
      size="sm"
      tone="soft"
      class="chip"
    >
      <span class="chip__text">{{ s.label }}</span>
      <button type="button" class="chip__close" [attr.aria-label]="removeLabel()" (click)="removeOne(s.value, $event)">&times;</button>
    </shared-badge>
  </div>

  <ng-template #placeholderTpl>
    <span class="ms-control__placeholder">{{ placeholder || defaultPlaceholder() }}</span>
  </ng-template>

  <div class="ms-control__caret" aria-hidden="true"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></div>
</div>

<div class="ms-panel" *ngIf="isOpen" (click)="$event.stopPropagation()">
  <div class="ms-panel__search">
    <input
      type="text"
      class="ms-input"
      [placeholder]="searchPlaceholder()"
      (input)="onSearch($event)"
      (keydown.escape)="close()"
    />
  </div>

  <div class="ms-panel__list" role="listbox" aria-multiselectable="true">
    <label class="ms-option" *ngFor="let o of filtered()">
      <input
        type="checkbox"
        class="ms-checkbox"
        [checked]="isChecked(o.value)"
        (change)="onToggle(o.value)"
      />
      <span class="ms-checkmark" aria-hidden="true"></span>
      <span class="ms-option__label">{{ o.label }}</span>
    </label>

    <div class="ms-panel__empty" *ngIf="!filtered().length">
      {{ noResultsLabel() }}
    </div>
  </div>
</div>







