# ================================
# CONVERSA BACKEND CONFIGURATION
# ================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control

# ================================
# DJANGO CORE SETTINGS
# ================================
# Generate a strong secret key for production
# You can generate one with: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=your-secret-key-here-change-in-production

# Debug mode (NEVER set to True in production)
DEBUG=False

# Django settings module (dev or prod)
DJANGO_SETTINGS_MODULE=config.settings.prod

# Allowed hosts (comma-separated, no spaces)
# Example: yourdomain.com,www.yourdomain.com,api.yourdomain.com
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# ================================
# DATABASE CONFIGURATION
# ================================
DJANGO_DB_ENGINE=django.db.backends.postgresql
DJANGO_DB_NAME=conversa_db
DJANGO_DB_USER=postgres
DJANGO_DB_PASSWORD=postgres
DJANGO_DB_HOST=db
DJANGO_DB_PORT=5432

# ================================
# SECURITY SETTINGS
# ================================
# CORS - Comma-separated origins (no spaces)
# Example: https://yourdomain.com,https://www.yourdomain.com
DJANGO_CORS_ALLOWED_ORIGINS=http://localhost:4200,http://127.0.0.1:4200

# CSRF - Comma-separated trusted origins (no spaces)
DJANGO_CSRF_TRUSTED_ORIGINS=http://localhost:4200,http://127.0.0.1:4200

# HSTS (only for production over HTTPS)
DJANGO_SECURE_HSTS_SECONDS=31536000

# ================================
# STRIPE PAYMENT CONFIGURATION
# ================================
# IMPORTANT: Use TEST keys only (sk_test_...)
# Get your keys from: https://dashboard.stripe.com/test/apikeys
DJANGO_STRIPE_SECRET_KEY=sk_test_your_stripe_test_key_here
DJANGO_STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
DJANGO_STRIPE_CURRENCY=eur

# Stripe simulator flags (for testing)
STRIPE_CONFIRM_SIMULATOR_ENABLED=1
STRIPE_RAW_CARD_SIM_ENABLED=0
STRIPE_PI_ALLOW_REDIRECTS=always

# ================================
# FRONTEND CONFIGURATION
# ================================
# Base URL of your frontend application
DJANGO_FRONTEND_BASE_URL=http://localhost:4200

# Stripe return URLs (paths will be appended to FRONTEND_BASE_URL)
DJANGO_STRIPE_SUCCESS_PATH=/stripe/success
DJANGO_STRIPE_CANCEL_PATH=/stripe/cancel

# ================================
# BOOKING CONFIGURATION
# ================================
# Time in minutes before a pending booking expires
DJANGO_BOOKING_TTL_MINUTES=15

# ================================
# SCHEDULED TASKS CONFIGURATION
# ================================
# Auto-cancellation check interval (in minutes)
# Used by Render Cron Jobs in production
# For local dev, run manually: python manage.py cancel_underpopulated_events
DJANGO_AUTO_CANCEL_CHECK_INTERVAL=15

# DEPRECATED: Celery is no longer used (replaced by Render Cron Jobs)
# CELERY_BROKER_URL=redis://redis:6379/0
# CELERY_RESULT_BACKEND=redis://redis:6379/0

# ================================
# DOCKER CONFIGURATION
# ================================
# Number of Gunicorn workers (2-4 x CPU cores)
WORKERS=2

# Number of threads per worker
THREADS=4

# Port for backend service
PORT=8000

# ================================
# DEVELOPMENT ONLY
# ================================
# Uncomment for local development
# DEBUG=True
# DJANGO_SETTINGS_MODULE=config.settings.dev
# DJANGO_ALLOWED_HOSTS=*
